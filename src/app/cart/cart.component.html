<h2>Cart</h2>
@if(cartItems.length > 0){

<div class="row">
  <div class="col-12">
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th colspan="1"></th>
            <th scope="col">Description</th>
            <th scope="col">Quantity</th>
            <th scope="col">Remove</th>
            <th scope="col">Unit Price</th>
            <th scope="col">Price</th>
          </tr>
        </thead>
        <tbody>
          @for(item of cartItems;track $index){
          <tr class="cart-item">
            <td>
              <div class="d-flex align-items-center">
                <img [src]="item?.images[0]" alt="" />
              </div>
            </td>
            <td>
              <div>
                <a class="link" [routerLink]="['/product-details', item.id]">{{
                  item?.title
                }}</a>
              </div>
              <div class="text-muted">Product Code: {{ item?.sku }}</div>
            </td>
            <td class="">
              <div class="d-flex flex-column">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <button
                      class="btn btn-dark btnn mx-3"
                      (click)="inc(item?.id)"
                      type="button"
                      [disabled]="item.quantity === item.stock"
                    >
                      +
                    </button>
                  </div>
                  <input
                    type="number"
                    class="quantity-input text-center"
                    [value]="item?.quantity"
                    readonly
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-dark btnn mx-3"
                      (click)="dec(item?.id)"
                      type="button"
                      [disabled]="item.quantity === 1"
                    >
                      -
                    </button>
                  </div>
                </div>
                <div>
                  <small
                    >@if(item.quantity === item.stock){this is the max quantity
                    availible}
                  </small>
                </div>
              </div>
            </td>
            <td>
              <button class="remove-btn" (click)="del(item?.id)" type="button">
                Ã—
              </button>
            </td>
            <td>
              @if(item.discountPercentage < 1) {
              <p class="card-text fs-4">$ {{ item?.price }}</p>
              }@else {
              <p class="card-text text-decoration-line-through">
                $
                <span class="text-danger">{{ item?.price }}</span>
              </p>
              <p class="card-text fs-4">
                $
                {{
                  (item?.price | discount : item?.discountPercentage).toFixed(2)
                }}
              </p>
              }
            </td>
            <td>
              @if(item.discountPercentage < 1) {
              <p class="card-text fs-4">
                $ {{ (item?.quantity * item?.price).toFixed(2) }}
              </p>
              }@else {

              <p class="card-text fs-4">
                $
                {{
                  (
                    (item?.price | discount : item?.discountPercentage) *
                    item?.quantity
                  ).toFixed(2)
                }}
              </p>
              }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    <div class="text-end">
      <h4>Total: ${{ totalPrice.toFixed(2) }}</h4>
    </div>
  </div>
</div>
}@else{
<div class="text-center">
  <p>Your cart is empty.</p>
  <a routerLink="/" class="btn btn-primary">Continue Shopping</a>
</div>
}
